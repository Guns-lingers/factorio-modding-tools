"use strict";var D=Object.create;var v=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var A=(e,o)=>{for(var r in o)v(e,r,{get:o[r],enumerable:!0})},b=(e,o,r,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of E(o))!T.call(e,i)&&i!==r&&v(e,i,{get:()=>o[i],enumerable:!(s=O(o,i))||s.enumerable});return e};var m=(e,o,r)=>(r=e!=null?D(z(e)):{},b(o||!e||!e.__esModule?v(r,"default",{value:e,enumerable:!0}):r,e)),q=e=>b(v({},"__esModule",{value:!0}),e);var H={};A(H,{activate:()=>K,deactivate:()=>L});module.exports=q(H);var t=m(require("vscode")),d=m(require("path")),$=m(require("child_process")),j=m(require("adm-zip"));var p=m(require("fs")),u=m(require("path"));function k(e,o){let r=u.join(e,o.rootName);p.mkdirSync(r,{recursive:!0});for(let n of o.dirs)p.mkdirSync(u.join(r,n.relativePath),{recursive:!0});for(let n of o.files){let a=u.join(r,n.relativePath);p.mkdirSync(u.dirname(a),{recursive:!0});let c=typeof n.content=="function"?n.content():n.content||"";p.writeFileSync(a,c)}let s=u.join(r,"info.json"),i=JSON.parse(p.readFileSync(s,"utf-8"));i.name=o.rootName,p.writeFileSync(s,JSON.stringify(i,null,2))}var S={rootName:"",dirs:[{relativePath:"locale/en"},{relativePath:"graphics/icons"},{relativePath:"prototypes"}],files:[{relativePath:"info.json",content:()=>JSON.stringify({name:"",version:"0.0.1",title:"",author:"",description:"",factorio_version:"2.0",dependencies:["base"]},null,2)},{relativePath:"control.lua",content:`-- control.lua
`},{relativePath:"data.lua",content:()=>["items","containers","recipes","technologies"].map(e=>`require("prototypes.${e}")`).join(`
`)+`
`},{relativePath:"locale/en/locale.cfg",content:""},{relativePath:"prototypes/items.lua",content:`-- items.lua
`},{relativePath:"prototypes/containers.lua",content:`-- containers.lua
`},{relativePath:"prototypes/recipes.lua",content:`-- recipes.lua
`},{relativePath:"prototypes/technologies.lua",content:`-- technologies.lua
`}]};var C=m(require("vscode")),F=m(require("path"));function M(){let e=C.workspace.workspaceFolders;if(e&&e.length>0)return F.basename(e[0].uri.fsPath)}var J=M()??"DEFAULT_MOD_NAME",w=e=>Object.fromEntries(Object.entries(e).map(([o,r])=>[o,r.replace(/{modName}/g,J)])),P={item:{...w({name:'"${1:name}"',icon:'"${2:__{modName}__/graphics/icons/item.png}"',icon_size:"${3:64}",subgroup:'"${4:raw-resource}"',order:'"${5:a[b]-c[d]}"',stack_size:"${6:100}"})},recipe:{...w({name:'"${1:name}"',category:'"${2:crafting}"',energy_required:"${3:1}",ingredients:'${4:{ type = "item", name = "iron-plate", amount = 1 }}',results:'${5:{ type = "item", name = "product", amount = 1 }}'})},container:{...w({name:'"${1:name}"',icon:'"${2:__{modName}__/graphics/icons/container.png}"',icon_size:"${3:64}",flags:'${4:{ "placeable-neutral", "player-creation" }}',minable:'${5:{ mining_time = 0.2, result = "name" }}',max_health:"${6:100}",collision_box:"${7:{{-0.35, -0.35}, {0.35, 0.35}}}",selection_box:"${8:{{-0.5, -0.5}, {0.5, 0.5}}}",inventory_size:"${9:16}",picture:'${10:{ filename = "__{modName}__/graphics/entity/entity/entity.png", priority = "extra-high", width = 64, height = 64, shift = {0, 0} }}'})},technology:{...w({name:'"${1:name}"',icon:'"${2:__{modName}__/graphics/icons/technology.png}"',icon_size:"${3:64}",prerequisites:'${4:{"automation", "steel-processing"}}',unit:'${5:{ count = 100, ingredients = {{"automation-science-pack",1}}, time = 30 }}',effects:'${6:{{ type = "unlock-recipe", recipe = "recipe-name" }}}',order:'"${7:c-a}"'})}},N=Object.keys(P);var g=m(require("vscode")),I={"achievement-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F","achievement-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0434\u043E\u0441\u0442\u0438\u0436\u0435\u043D\u0438\u044F","ammo-category-name":"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0431\u043E\u0435\u043F\u0440\u0438\u043F\u0430\u0441\u043E\u0432","autoplace-control-names":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0430\u0432\u0442\u043E\u043F\u043E\u0437\u0438\u0446\u0438\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F",controls:"\u042D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F","damage-type-name":"\u0422\u0438\u043F \u0443\u0440\u043E\u043D\u0430","decorative-name":"\u0414\u0435\u043A\u043E\u0440\u0430\u0442\u0438\u0432\u043D\u044B\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B","entity-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0441\u0443\u0449\u043D\u043E\u0441\u0442\u0438","entity-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0443\u0449\u043D\u043E\u0441\u0442\u0438","equipment-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043E\u0431\u043E\u0440\u0443\u0434\u043E\u0432\u0430\u043D\u0438\u044F","fluid-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0436\u0438\u0434\u043A\u043E\u0441\u0442\u0438","fuel-category-name":"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0442\u043E\u043F\u043B\u0438\u0432\u0430","item-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430","item-group-name":"\u0413\u0440\u0443\u043F\u043F\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u043E\u0432","item-limitation":"\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u044F \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430","item-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430","map-gen-preset-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u0438 \u043A\u0430\u0440\u0442\u044B","map-gen-preset-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u0438 \u043A\u0430\u0440\u0442\u044B","mod-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0430","mod-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0430","modifier-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440\u0430","programmable-speaker-instrument":"\u0418\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u0443\u0435\u043C\u043E\u0439 \u043A\u043E\u043B\u043E\u043D\u043A\u0438","programmable-speaker-note":"\u041D\u043E\u0442\u0430 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u0443\u0435\u043C\u043E\u0439 \u043A\u043E\u043B\u043E\u043D\u043A\u0438","recipe-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0440\u0435\u0446\u0435\u043F\u0442\u0430",shortcut:"\u0421\u043E\u0447\u0435\u0442\u0430\u043D\u0438\u0435 \u043A\u043B\u0430\u0432\u0438\u0448",story:"\u0422\u0435\u043A\u0441\u0442 \u0438\u0441\u0442\u043E\u0440\u0438\u0438","string-mod-setting":"\u0421\u0442\u0440\u043E\u043A\u043E\u0432\u0430\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u043C\u043E\u0434\u0430","technology-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0435\u0445\u043D\u043E\u043B\u043E\u0433\u0438\u0438","technology-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0445\u043D\u043E\u043B\u043E\u0433\u0438\u0438","tile-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u043B\u0438\u0442\u043A\u0438","tips-and-tricks-item-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0441\u043E\u0432\u0435\u0442\u0430 \u0438 \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438","tips-and-tricks-item-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u043E\u0432\u0435\u0442\u0430 \u0438 \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438","virtual-signal-description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0438\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0441\u0438\u0433\u043D\u0430\u043B\u0430","virtual-signal-name":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0432\u0438\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0441\u0438\u0433\u043D\u0430\u043B\u0430"},y=class{provideCompletionItems(o,r){let s=o.lineAt(r).text.substr(0,r.character);return/^\s*\[\w*$/.test(s)?Object.keys(I).map(i=>{let n=new g.CompletionItem(i,g.CompletionItemKind.Module);return n.insertText=i+"]",n.detail=I[i],n}):/^\s*\w*$/.test(s)&&o.lineAt(r).text.includes("=")?["example-key","another-key"].map(n=>new g.CompletionItem(n,g.CompletionItemKind.Field)):[]}};function K(e){let o=t.commands.registerCommand("factorioModHelper.createModStructure",async()=>{let n=await t.window.showOpenDialog({canSelectFolders:!0,openLabel:"Select Folder to Create Mod In"});if(!n?.length){t.window.showErrorMessage("No folder selected.");return}let a=n[0].fsPath,c=await t.window.showInputBox({prompt:"Enter mod name",placeHolder:"my-factorio-mod"});if(!c){t.window.showErrorMessage("Mod name is required.");return}let f={...S,rootName:c};try{k(a,f);let l=t.Uri.file(d.join(a,c)),h=t.workspace.workspaceFolders||[];t.workspace.updateWorkspaceFolders(h.length,0,{uri:l,name:c}),t.window.showInformationMessage(`Factorio mod structure created: ${c}`)}catch(l){t.window.showErrorMessage(`Error: ${l.message}`)}});e.subscriptions.push(o);let r=t.commands.registerCommand("factorioModHelper.packageModAsZip",async()=>{let n=await t.window.showOpenDialog({canSelectFolders:!0,openLabel:"Select mod folder to package"});if(!n?.length){t.window.showErrorMessage("No folder selected.");return}let a=n[0].fsPath,c=d.basename(a),f=d.join(d.dirname(a),`${c}.zip`);try{let l=new j.default;l.addLocalFolder(a),l.writeZip(f),t.window.showInformationMessage(`Mod packaged: ${f}`);let h=d.dirname(f),_=process.platform;_==="win32"?$.exec(`explorer.exe /select,"${f}"`):_==="darwin"?$.exec(`open "${h}"`):$.exec(`xdg-open "${h}"`)}catch(l){t.window.showErrorMessage(`Packaging error: ${l.message}`)}});e.subscriptions.push(r);let s=t.languages.registerCompletionItemProvider({language:"lua",scheme:"file"},new x,'"');e.subscriptions.push(s);let i=t.languages.registerCompletionItemProvider({pattern:"**/*.cfg",scheme:"file"},new y,"[");e.subscriptions.push(i)}function L(){}var x=class{provideCompletionItems(o,r){let i=o.lineAt(r.line).text.slice(0,r.character);return/type\s*=\s*"$/.test(i)?N.map(n=>{let a=new t.CompletionItem(n,t.CompletionItemKind.Value);return a.insertText=new t.SnippetString(this.buildSnippet(n)),a.documentation=new t.MarkdownString(`\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u043F\u0440\u043E\u0442\u043E\u0442\u0438\u043F\u0430 \`${n}\``),a}):[]}buildSnippet(o){let r=P[o],s=[`"${o}",`];for(let[n,a]of Object.entries(r))s.push(`	${n} = ${a},`);let i=s.length-1;return s[i]=s[i].replace(/,$/,""),s.join(`
`)}};0&&(module.exports={activate,deactivate});
